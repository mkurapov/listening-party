{"map":{"version":3,"sources":["static/js/main.89baba00.chunk.js"],"names":["this","push","104","module","exports","111","__webpack_exports__","__webpack_require__","r","SocketEvent","react","react_default","n","react_dom","react_dom_default","react_router","components_Button","_ref","name","onClick","a","createElement","slicedToArray","axios","axios_default","SPOTIFY_API","LOGIN","SPOTIFY_ACCOUNT_URL","ME","SPOTIFY_URL","CURRENT_PLAYBACK","lib","src_socket","lib_default","UserContext","Object","user","undefined","isLoading","logout","UserContext_UserProvider","children","_useState","_useState2","setUser","_useState3","_useState4","setIsLoading","savedUser","localStorage","getItem","savedAccessToken","savedRefreshToken","window","location","hash","login","_user","JSON","parse","emit","USER_CONNECTED_REQ","id","locationArgs","hashInput","substring","params","split","map","hk","temp","getHashParams","defaults","headers","common","access_token","get","then","res","data","setItem","stringify","refresh_token","clear","SettingsContext","Provider","value","UserContext_useUser","pages_Home","history","_useUser","on","CREATE_PARTY_RES","newPartyId","CREATE_PARTY_REQ","href","APP_URL","Party","_party$users","match","party","setParty","_useState5","_useState6","partyId","PARTY_JOINED_RES","console","log","USER_LEFT_PARTY_RES","PARTY_NOT_FOUND_RES","setTimeout","USER_LEFT_PARTY_REQ","PARTY_JOINED_REQ","socketId","users","display_name","src_App","className","exact","path","component","Boolean","hostname","react_router_dom","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message","52","57","58"],"mappings":"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"},"code":"(this[\"webpackJsonplistening-party\"]=this[\"webpackJsonplistening-party\"]||[]).push([[0],{104:function(e,t){},111:function(e,t,n){\"use strict\";n.r(t);var a,o=n(0),c=n.n(o),E=n(48),r=n.n(E),i=(n(57),n(58),n(4));!function(e){e.USER_CONNECTED_REQ=\"USER_CONNECTED_REQ\",e.USER_DISCONNECTED_REQ=\"USER_DISCONNECTED_REQ\",e.CREATE_PARTY_REQ=\"CREATE_PARTY_REQ\",e.CREATE_PARTY_RES=\"CREATE_PARTY_RES\",e.USER_JOINED_RES=\"USER_JOINED_RES\",e.USER_JOINED_REQ=\"USER_JOINED_REQ\",e.USER_LEFT_PARTY_REQ=\"USER_LEFT_PARTY_REQ\",e.USER_LEFT_PARTY_RES=\"USER_LEFT_PARTY_RES\",e.PARTY_JOINED_REQ=\"PARTY_JOINED_REQ\",e.PARTY_JOINED_UNAUTHED_REQ=\"PARTY_JOINED_UNAUTHED_REQ\",e.PARTY_JOINED_UNAUTHED_RES=\"PARTY_JOINED_UNAUTHED_RES\",e.PARTY_JOINED_RES=\"PARTY_JOINED_RES\",e.PARTY_NOT_FOUND_RES=\"PARTY_NOT_FOUND_RES\"}(a||(a={}));var l=function(e){var t=e.name,n=e.onClick;return c.a.createElement(\"button\",{onClick:n},t)},u=n(5),s=n(21),_=n.n(s),R={LOGIN:\"https://accounts.spotify.com/authorize\",ME:\"https://api.spotify.com/v1/me\",CURRENT_PLAYBACK:\"https://api.spotify.com/v1/me/player\"},m=n(49),T=n.n(m)()(\"http://localhost:8080\"),f=Object(o.createContext)({user:void 0,isLoading:!1,logout:function(){}}),d=function(e){var t=e.children,n=Object(o.useState)(),E=Object(u.a)(n,2),r=E[0],i=E[1],l=Object(o.useState)(!0),s=Object(u.a)(l,2),m=s[0],d=s[1];Object(o.useEffect)((function(){var e=localStorage.getItem(\"user\"),t=localStorage.getItem(\"access_token\"),n=localStorage.getItem(\"access_token\");if(!e||!t||!n){if(!window.location.hash)return;S()}if(e){var o=JSON.parse(e);i(o),d(!1),T.emit(a.USER_CONNECTED_REQ,o.id)}}),[]);var S=function(){var e=function(e){var t=e.substring(1),n={};return t.split(\"&\").map((function(e){var t=e.split(\"=\");n[t[0]]=t[1]})),n}(window.location.hash);_.a.defaults.headers.common.Authorization=\"Bearer \"+e.access_token,_.a.get(R.ME).then((function(t){var n=t.data;i(n),T.emit(a.USER_CONNECTED_REQ,n.id),localStorage.setItem(\"user\",JSON.stringify(n)),localStorage.setItem(\"access_token\",e.access_token),localStorage.setItem(\"refresh_token\",e.refresh_token)}))},O=function(){i(void 0),localStorage.clear()},p=Object(o.useMemo)((function(){return{user:r,isLoading:m,logout:O}}),[r,O]);return c.a.createElement(f.Provider,{value:p},t)},S=function(){return Object(o.useContext)(f)},O=function(){var e=Object(i.f)(),t=S(),n=t.user,E=t.logout;Object(o.useEffect)((function(){T.on(a.CREATE_PARTY_RES,(function(t){e.push(\"/party/\"+t)}))}),[]);return c.a.createElement(\"div\",null,n&&n.id?c.a.createElement(\"div\",null,c.a.createElement(\"div\",null,\"Hi, \",n.id,\"!\"),c.a.createElement(l,{name:\"Logout\",onClick:E}),c.a.createElement(l,{name:\"Create new Room\",onClick:function(){T.emit(a.CREATE_PARTY_REQ,T.id)}})):c.a.createElement(\"a\",{href:\"http://localhost:8080/login\"},\"Login\"))},p=function(e){var t,n=e.match,E=S(),r=E.user,l=E.isLoading,s=Object(o.useState)(0),_=Object(u.a)(s,2),R=(_[0],_[1],Object(o.useState)(void 0)),m=Object(u.a)(R,2),f=m[0],d=m[1],O=Object(o.useState)([]),p=Object(u.a)(O,2),A=(p[0],p[1],n.params.id),N=Object(i.f)();return T.on(a.PARTY_JOINED_RES,(function(e){console.log(\"USER JOINED PARTY\",e),d(e)})),T.on(a.USER_LEFT_PARTY_RES,(function(e){console.log(\"USER LEFT PARTY\",e),d(e)})),T.on(a.PARTY_NOT_FOUND_RES,(function(e){console.log(\"This party was not found... redirecting back\"),setTimeout((function(){N.push(\"/\")}),2e3)})),Object(o.useEffect)((function(){return function(){T.emit(a.USER_LEFT_PARTY_REQ)}}),[]),Object(o.useEffect)((function(){console.log(l),r?T.emit(a.PARTY_JOINED_REQ,{user:r,socketId:T.id,partyId:A}):console.log(\"You are not authed\")}),[r]),c.a.createElement(\"div\",null,r&&r.id?c.a.createElement(\"div\",null,c.a.createElement(\"h1\",null,\"A duper dope party\"),c.a.createElement(\"div\",null,\"Hi, \",r.id,\"!\"),c.a.createElement(\"div\",null,\"Users in there: \",null===f||void 0===f||null===(t=f.users)||void 0===t?void 0:t.map((function(e){return e.display_name})))):c.a.createElement(\"div\",null,\"This is a party, but you aint authed.\"))};var A=function(){return c.a.createElement(d,null,c.a.createElement(\"div\",{className:\"App\"},c.a.createElement(\"header\",{className:\"App-header\"}),c.a.createElement(i.c,null,c.a.createElement(i.a,{exact:!0,path:\"/\"},c.a.createElement(O,null)),c.a.createElement(i.a,{path:\"/party/:id\",component:p}))))};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=n(14);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(N.a,null,c.a.createElement(A,null))),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,n){e.exports=n(111)},57:function(e,t,n){},58:function(e,t,n){}},[[52,1,2]]]);","extractedComments":[]}