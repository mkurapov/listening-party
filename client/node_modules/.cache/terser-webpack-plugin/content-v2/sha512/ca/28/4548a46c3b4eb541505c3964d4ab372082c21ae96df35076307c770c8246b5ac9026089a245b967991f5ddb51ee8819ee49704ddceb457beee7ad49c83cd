{"map":{"version":3,"sources":["static/js/main.d6d08478.chunk.js"],"names":["this","push","104","module","exports","111","__webpack_exports__","__webpack_require__","r","SocketEvent","react","react_default","n","react_dom","react_dom_default","react_router","components_Button","_ref","name","onClick","a","createElement","slicedToArray","axios","axios_default","SPOTIFY_URL","SPOTIFY_API","LOGIN","SPOTIFY_ACCOUNT_URL","ME","CURRENTLY_PLAYING","PLAYER","PLAY","lib","src_socket","lib_default","UserContext","Object","user","undefined","isLoading","logout","UserContext_UserProvider","children","_useState","_useState2","setUser","_useState3","_useState4","setIsLoading","savedUser","localStorage","getItem","savedAccessToken","savedRefreshToken","window","location","hash","login","setAuthheader","_user","JSON","parse","emit","USER_CONNECTED_REQ","id","locationArgs","hashInput","substring","params","split","map","hk","temp","getHashParams","access_token","get","then","res","data","console","log","setItem","stringify","refresh_token","clear","accessToken","defaults","headers","common","SettingsContext","Provider","value","UserContext_useUser","pages_Home","history","_useUser","on","CREATE_PARTY_RES","newPartyId","CREATE_PARTY_REQ","href","APP_URL","Party","_currentParty$adminUs","_currentParty$users","_currentParty$playbac","_currentParty$playbac2","pollCurrentlyPlaying","match","currentParty","setCurrentParty","partyId","handleUserLeaving","USER_LEFT_PARTY_RES","onUserLeftParty","PARTY_PLAYBACK_CHANGED_RES","onPlaybackChanged","PARTY_NOT_FOUND_RES","onPartyNotFound","PARTY_NEW_USER_JOINED_RES","onNewUserJoined","PARTY_JOINED_RES","onPartyJoined","PARTY_JOINED_REQ","socketId","party","_party$adminUser","_party$adminUser2","adminUser","clearInterval","setInterval","getCurrentlyPlaying","_party$adminUser3","playbackState","setCurrentlyPlaying","_party$users","users","length","setTimeout","_party$adminUser4","is_playing","off","USER_LEFT_PARTY_REQ","args","uris","item","uri","put","catch","err","response","status","PARTY_PLAYBACK_REQ","display_name","join","className","album","artists","src_App","exact","path","component","Boolean","hostname","react_router_dom","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message","52","57","58"],"mappings":"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"},"code":"(this[\"webpackJsonplistening-party\"]=this[\"webpackJsonplistening-party\"]||[]).push([[0],{104:function(e,t){},111:function(e,t,n){\"use strict\";n.r(t);var a,o=n(0),l=n.n(o),i=n(48),c=n.n(i),r=(n(57),n(58),n(4));!function(e){e.USER_CONNECTED_REQ=\"USER_CONNECTED_REQ\",e.USER_DISCONNECTED_REQ=\"USER_DISCONNECTED_REQ\",e.CREATE_PARTY_REQ=\"CREATE_PARTY_REQ\",e.CREATE_PARTY_RES=\"CREATE_PARTY_RES\",e.USER_JOINED_RES=\"USER_JOINED_RES\",e.USER_JOINED_REQ=\"USER_JOINED_REQ\",e.USER_LEFT_PARTY_REQ=\"USER_LEFT_PARTY_REQ\",e.USER_LEFT_PARTY_RES=\"USER_LEFT_PARTY_RES\",e.PARTY_JOINED_REQ=\"PARTY_JOINED_REQ\",e.PARTY_JOINED_UNAUTHED_REQ=\"PARTY_JOINED_UNAUTHED_REQ\",e.PARTY_JOINED_UNAUTHED_RES=\"PARTY_JOINED_UNAUTHED_RES\",e.PARTY_JOINED_RES=\"PARTY_JOINED_RES\",e.PARTY_NOT_FOUND_RES=\"PARTY_NOT_FOUND_RES\",e.PARTY_PLAYBACK_CHANGED_RES=\"PARTY_PLAYBACK_CHANGED_RES\",e.PARTY_PLAYBACK_REQ=\"PARTY_PLAYBACK_REQ\",e.PARTY_NEW_USER_JOINED_RES=\"PARTY_NEW_USER_JOINED_RES\"}(a||(a={}));var E=function(e){var t=e.name,n=e.onClick;return l.a.createElement(\"button\",{onClick:n},t)},u=n(9),s=n(7),_=n.n(s),R=\"https://api.spotify.com/v1\",d={LOGIN:\"https://accounts.spotify.com/authorize\",ME:R+\"/me\",CURRENTLY_PLAYING:R+\"/me/player/currently-playing\",PLAYER:R+\"/me/player\",PLAY:R+\"/me/player/play\"},m=n(49),v=n.n(m)()(\"http://localhost:8080\"),f=Object(o.createContext)({user:void 0,isLoading:!1,logout:function(){}}),A=function(e){var t=e.children,n=Object(o.useState)(),i=Object(u.a)(n,2),c=i[0],r=i[1],E=Object(o.useState)(!0),s=Object(u.a)(E,2),R=s[0],m=s[1];Object(o.useEffect)((function(){var e=localStorage.getItem(\"user\"),t=localStorage.getItem(\"access_token\"),n=localStorage.getItem(\"access_token\");if(!e||!t||!n){if(!window.location.hash)return;A()}if(e){T(t);var o=JSON.parse(e);r(o),m(!1),v.emit(a.USER_CONNECTED_REQ,o.id)}}),[]);var A=function(){var e=function(e){var t=e.substring(1),n={};return t.split(\"&\").map((function(e){var t=e.split(\"=\");n[t[0]]=t[1]})),n}(window.location.hash);T(e.access_token),_.a.get(d.ME).then((function(t){var n=t.data;console.log(n),r(n),m(!1),v.emit(a.USER_CONNECTED_REQ,n.id),localStorage.setItem(\"user\",JSON.stringify(n)),localStorage.setItem(\"access_token\",e.access_token),localStorage.setItem(\"refresh_token\",e.refresh_token)}))},S=function(){r(void 0),localStorage.clear()},T=function(e){_.a.defaults.headers.common.Authorization=\"Bearer \"+e},g=Object(o.useMemo)((function(){return{user:c,isLoading:R,logout:S}}),[c,S]);return l.a.createElement(f.Provider,{value:g},t)},S=function(){return Object(o.useContext)(f)},T=function(){var e=Object(r.f)(),t=S(),n=t.user,i=t.logout;Object(o.useEffect)((function(){v.on(a.CREATE_PARTY_RES,(function(t){e.push(\"/party/\"+t)}))}),[]);return l.a.createElement(\"div\",null,n&&n.id?l.a.createElement(\"div\",null,l.a.createElement(\"div\",null,\"Hi, \",n.id,\"!\"),l.a.createElement(E,{name:\"Logout\",onClick:i}),l.a.createElement(E,{name:\"Create new Room\",onClick:function(){v.emit(a.CREATE_PARTY_REQ,v.id)}})):l.a.createElement(\"a\",{href:\"http://localhost:8080/login\"},\"Login\"))},g=function(e){var t,n,i,c,E,s=e.match,R=S(),m=R.user,f=R.isLoading,A=Object(o.useState)(void 0),T=Object(u.a)(A,2),g=T[0],p=T[1],N=s.params.id,P=Object(r.f)();Object(o.useEffect)((function(){return console.log(\"loaded party first time\"),function(){return D()}}),[]),Object(o.useEffect)((function(){m&&!f?(console.log(\"Logged in as \",m.id),v.on(a.USER_LEFT_PARTY_RES,Y),v.on(a.PARTY_PLAYBACK_CHANGED_RES,h),v.on(a.PARTY_NOT_FOUND_RES,O),v.on(a.PARTY_NEW_USER_JOINED_RES,y),v.on(a.PARTY_JOINED_RES,U),v.emit(a.PARTY_JOINED_REQ,{user:m,socketId:v.id,partyId:N})):console.log(\"You are not authed\")}),[m]);var Y=function(e){var t,n;console.log(\"A user left party.\",e),console.log(\"Admin \",null===(t=e.adminUser)||void 0===t?void 0:t.id),console.log(\"User \",null===m||void 0===m?void 0:m.id),e&&(null===(n=e.adminUser)||void 0===n?void 0:n.id)===(null===m||void 0===m?void 0:m.id)&&(console.log(\"Youve been assigned admin.\"),clearInterval(E),E=setInterval((function(){I(e.id)}),5e3)),p(e)},h=function(e){var t;console.log(\"Playback state changed.\"),(null===(t=e.adminUser)||void 0===t?void 0:t.id)===(null===m||void 0===m?void 0:m.id)||e.playbackState&&C(e.playbackState),p(e)},y=function(e){var t;console.log(\"New user joined,\",e.users?e.users[(null===(t=e.users)||void 0===t?void 0:t.length)-1]:\"\"),p(e)},O=function(){console.log(\"This party was not found... redirecting back\"),setTimeout((function(){P.push(\"/\")}),2e3)},U=function(e){var t;console.log(m),(null===(t=e.adminUser)||void 0===t?void 0:t.id)===(null===m||void 0===m?void 0:m.id)&&(E=setInterval((function(){I(e.id)}),5e3)),p(e),e.playbackState&&e.playbackState.is_playing&&C(e.playbackState)},D=function(){v.off(a.USER_LEFT_PARTY_RES,Y),v.off(a.PARTY_PLAYBACK_CHANGED_RES,h),v.off(a.PARTY_NOT_FOUND_RES,O),v.off(a.PARTY_NEW_USER_JOINED_RES,y),v.off(a.PARTY_JOINED_RES,U),clearInterval(E),v.emit(a.USER_LEFT_PARTY_REQ)},C=function(e){console.log(\"setting currently playing...\",e);var t={uris:[e.item.uri]};_.a.put(d.PLAY,t).then((function(){return console.log(\"Playing new song: \",e.item.name)})).catch((function(e){console.log(\"could not set new playback state. \",e.response),404===e.status?console.log(\"No active device found.\"):403===e.status&&console.log(\"Premium required\")}))},I=function(e){console.log(\"Getting currently playing...\"),_.a.get(d.CURRENTLY_PLAYING).then((function(t){t.data?v.emit(a.PARTY_PLAYBACK_REQ,{playbackState:t.data,partyId:e}):console.log(\"Nothing is playing, or you are in private mode.\")})).catch((function(e){console.log(\"could not get currently playing\")}))};return l.a.createElement(\"div\",null,m&&m.id?l.a.createElement(\"div\",null,l.a.createElement(\"h1\",null,\"A duper dope party\"),l.a.createElement(\"h2\",null,\"Hi, \",m.display_name,\"!\"),l.a.createElement(\"div\",null,\"The DJ is \",null===g||void 0===g||null===(t=g.adminUser)||void 0===t?void 0:t.display_name),l.a.createElement(\"div\",null,\"Users in party: \",null===g||void 0===g||null===(n=g.users)||void 0===n?void 0:n.map((function(e){return e.display_name})).join(\", \")),(null===g||void 0===g?void 0:g.playbackState)?l.a.createElement(\"div\",null,l.a.createElement(\"div\",{className:\"song\"},\"Currently playing\"),l.a.createElement(\"h3\",null,null===g||void 0===g||null===(i=g.playbackState)||void 0===i?void 0:i.item.name),l.a.createElement(\"h3\",null,null===g||void 0===g||null===(c=g.playbackState)||void 0===c?void 0:c.item.album.artists[0].name)):l.a.createElement(\"div\",null,\"No tracks playing\")):l.a.createElement(\"div\",null,\"This is a party, but you aint authed.\"))};var p=function(){return l.a.createElement(A,null,l.a.createElement(\"div\",{className:\"App\"},l.a.createElement(\"header\",{className:\"App-header\"}),l.a.createElement(r.c,null,l.a.createElement(r.a,{exact:!0,path:\"/\"},l.a.createElement(T,null)),l.a.createElement(r.a,{path:\"/party/:id\",component:g}))))};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=n(15);c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(N.a,null,l.a.createElement(p,null))),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,n){e.exports=n(111)},57:function(e,t,n){},58:function(e,t,n){}},[[52,1,2]]]);","extractedComments":[]}