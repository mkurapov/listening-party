{"map":{"version":3,"sources":["static/js/main.1bbe80c7.chunk.js"],"names":["this","push","104","module","exports","111","__webpack_exports__","__webpack_require__","r","SocketEvent","react","react_default","n","react_dom","react_dom_default","react_router","components_Button","_ref","name","onClick","a","createElement","slicedToArray","axios","axios_default","SPOTIFY_API","LOGIN","SPOTIFY_ACCOUNT_URL","ME","SPOTIFY_URL","CURRENT_PLAYBACK","lib","src_socket","lib_default","UserContext","Object","user","undefined","isLoading","logout","UserContext_UserProvider","children","_useState","_useState2","setUser","_useState3","_useState4","setIsLoading","console","log","savedUser","localStorage","getItem","emit","USER_CONNECTED_REQ","window","location","hash","login","locationArgs","hashInput","substring","params","split","map","hk","temp","getHashParams","defaults","headers","common","access_token","get","then","res","data","setItem","JSON","stringify","USER_DISCONNECTED_REQ","clear","SettingsContext","Provider","value","UserContext_useUser","pages_Home","history","_useUser","on","CREATE_PARTY_RES","newPartyId","id","CREATE_PARTY_REQ","href","APP_URL","Party","_party$users","match","numberOfUsers","party","setParty","_useState5","_useState6","partyId","PARTY_JOINED_RES","USER_LEFT_PARTY_RES","USER_LEFT_PARTY_REQ","PARTY_JOINED_REQ","socketId","users","display_name","src_App","className","exact","path","component","Boolean","hostname","react_router_dom","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message","52","57","58"],"mappings":"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"},"code":"(this[\"webpackJsonplistening-party\"]=this[\"webpackJsonplistening-party\"]||[]).push([[0],{104:function(e,t){},111:function(e,t,n){\"use strict\";n.r(t);var a,o=n(0),E=n.n(o),c=n(48),i=n.n(c),r=(n(57),n(58),n(4));!function(e){e.USER_CONNECTED_REQ=\"USER_CONNECTED_REQ\",e.USER_DISCONNECTED_REQ=\"USER_DISCONNECTED_REQ\",e.CREATE_PARTY_REQ=\"CREATE_PARTY_REQ\",e.CREATE_PARTY_RES=\"CREATE_PARTY_RES\",e.USER_JOINED_RES=\"USER_JOINED_RES\",e.USER_JOINED_REQ=\"USER_JOINED_REQ\",e.USER_LEFT_PARTY_REQ=\"USER_LEFT_PARTY_REQ\",e.USER_LEFT_PARTY_RES=\"USER_LEFT_PARTY_RES\",e.PARTY_JOINED_REQ=\"PARTY_JOINED_REQ\",e.PARTY_JOINED_UNAUTHED_REQ=\"PARTY_JOINED_UNAUTHED_REQ\",e.PARTY_JOINED_UNAUTHED_RES=\"PARTY_JOINED_UNAUTHED_RES\",e.PARTY_JOINED_RES=\"PARTY_JOINED_RES\"}(a||(a={}));var l=function(e){var t=e.name,n=e.onClick;return E.a.createElement(\"button\",{onClick:n},t)},u=n(5),R=n(21),s=n.n(R),_={LOGIN:\"https://accounts.spotify.com/authorize\",ME:\"https://api.spotify.com/v1/me\",CURRENT_PLAYBACK:\"https://api.spotify.com/v1/me/player\"},m=n(49),d=n.n(m)()(\"http://localhost:8080\"),T=Object(o.createContext)({user:void 0,isLoading:!1,logout:function(){}}),f=function(e){var t=e.children,n=Object(o.useState)(),c=Object(u.a)(n,2),i=c[0],r=c[1],l=Object(o.useState)(!0),R=Object(u.a)(l,2),m=R[0],f=R[1];Object(o.useEffect)((function(){console.log(\"checklogin\");var e=localStorage.getItem(\"user\");if(e)return r(e),d.emit(a.USER_CONNECTED_REQ,e),void f(!1);window.location.hash&&S()}),[]);var S=function(){var e=function(e){var t=e.substring(1),n={};return t.split(\"&\").map((function(e){var t=e.split(\"=\");n[t[0]]=t[1]})),n}(window.location.hash);s.a.defaults.headers.common.Authorization=\"Bearer \"+e.access_token,s.a.get(_.ME).then((function(e){var t=e.data;r(t),d.emit(a.USER_CONNECTED_REQ,t),localStorage.setItem(\"user\",JSON.stringify(t))}))},O=function(){d.emit(a.USER_DISCONNECTED_REQ,i),r(void 0),localStorage.clear()},v=Object(o.useMemo)((function(){return{user:i,isLoading:m,logout:O}}),[i,O]);return E.a.createElement(T.Provider,{value:v},t)},S=function(){return Object(o.useContext)(T)},O=function(){var e=Object(r.f)(),t=S(),n=t.user,c=t.logout;Object(o.useEffect)((function(){d.on(a.CREATE_PARTY_RES,(function(t){e.push(\"/party/\"+t)}))}),[]);return E.a.createElement(\"div\",null,n&&n.id?E.a.createElement(\"div\",null,E.a.createElement(\"div\",null,\"Hi, \",n.id,\"!\"),E.a.createElement(l,{name:\"Logout\",onClick:c}),E.a.createElement(l,{name:\"Create new Room\",onClick:function(){d.emit(a.CREATE_PARTY_REQ,d.id)}})):E.a.createElement(\"a\",{href:\"http://localhost:8080/login\"},\"Login\"))},v=function(e){var t,n=e.match,c=S(),i=c.user,r=c.isLoading,l=Object(o.useState)(0),R=Object(u.a)(l,2),s=R[0],_=(R[1],Object(o.useState)(void 0)),m=Object(u.a)(_,2),T=m[0],f=m[1],O=Object(o.useState)([]),v=Object(u.a)(O,2),A=(v[0],v[1],n.params.id);if(d.on(a.PARTY_JOINED_RES,(function(e){console.log(\"USER JOINED PARTY\",e),f(e)})),d.on(a.USER_LEFT_PARTY_RES,(function(e){console.log(\"USER LEFT PARTY\",e),f(e)})),Object(o.useEffect)((function(){return function(){d.emit(a.USER_LEFT_PARTY_REQ)}}),[]),Object(o.useEffect)((function(){console.log(\"changed user in party\",i),i&&d.emit(a.PARTY_JOINED_REQ,{user:i,socketId:d.id,partyId:A})}),[i]),r)return E.a.createElement(\"div\",null,\"Loading...\");return E.a.createElement(\"div\",null,i&&i.id?E.a.createElement(\"div\",null,E.a.createElement(\"div\",null,\"Hi, \",i.id,\"!\")):E.a.createElement(\"div\",null,\"This is a party of \",s,\", but you aint authed.\"),E.a.createElement(\"div\",null,null===T||void 0===T||null===(t=T.users)||void 0===t?void 0:t.map((function(e){return e.display_name}))))};var A=function(){return E.a.createElement(f,null,E.a.createElement(\"div\",{className:\"App\"},E.a.createElement(\"header\",{className:\"App-header\"}),E.a.createElement(r.c,null,E.a.createElement(r.a,{exact:!0,path:\"/\"},E.a.createElement(O,null)),E.a.createElement(r.a,{path:\"/party/:id\",component:v}))))};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var p=n(14);i.a.render(E.a.createElement(E.a.StrictMode,null,E.a.createElement(p.a,null,E.a.createElement(A,null))),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,n){e.exports=n(111)},57:function(e,t,n){},58:function(e,t,n){}},[[52,1,2]]]);","extractedComments":[]}