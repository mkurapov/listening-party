{"map":{"version":3,"sources":["static/js/main.8a3ba473.chunk.js"],"names":["this","push","104","module","exports","111","__webpack_exports__","__webpack_require__","r","EventType","react","react_default","n","react_dom","react_dom_default","react_router","components_Button","_ref","name","onClick","a","createElement","slicedToArray","axios","axios_default","SPOTIFY_API","LOGIN","SPOTIFY_ACCOUNT_URL","ME","SPOTIFY_URL","CURRENT_PLAYBACK","UserContext","Object","user","undefined","isLoading","logout","UserContext_UserProvider","children","_useState","_useState2","setUser","_useState3","_useState4","setIsLoading","console","log","savedUser","localStorage","getItem","JSON","parse","window","location","hash","login","locationArgs","hashInput","substring","params","split","map","hk","temp","getHashParams","defaults","headers","common","access_token","get","then","res","data","setItem","stringify","clear","SettingsContext","Provider","value","UserContext_useUser","lib","src_socket","lib_default","pages_Home","history","_useUser","on","CREATE_PARTY_RES","newPartyId","id","emit","CREATE_PARTY_REQ","href","APP_URL","Party","_party$users","match","numberOfUsers","setNumberOfUsers","party","setParty","_useState5","_useState6","PARTY_JOINED_RES","onPartyJoined","PARTY_JOINED_UNAUTHED_RES","onPartyJoinedUnauthed","PARTY_JOINED_REQ","socketId","partyId","users","display_name","src_App","className","exact","path","component","Boolean","hostname","react_router_dom","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message","52","57","58"],"mappings":"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"},"code":"(this[\"webpackJsonplistening-party\"]=this[\"webpackJsonplistening-party\"]||[]).push([[0],{104:function(e,t){},111:function(e,t,n){\"use strict\";n.r(t);var a,o=n(0),c=n.n(o),r=n(48),i=n.n(r),l=(n(57),n(58),n(4));!function(e){e.CREATE_PARTY_REQ=\"CREATE_PARTY_REQ\",e.CREATE_PARTY_RES=\"CREATE_PARTY_RES\",e.USER_JOINED_RES=\"USER_JOINED_RES\",e.USER_JOINED_REQ=\"USER_JOINED_REQ\",e.USER_LEFT_PARTY_REQ=\"USER_LEFT_PARTY_REQ\",e.USER_LEFT_PARTY_RES=\"USER_LEFT_PARTY_RES\",e.PARTY_JOINED_REQ=\"PARTY_JOINED_REQ\",e.PARTY_JOINED_UNAUTHED_REQ=\"PARTY_JOINED_UNAUTHED_REQ\",e.PARTY_JOINED_UNAUTHED_RES=\"PARTY_JOINED_UNAUTHED_RES\",e.PARTY_JOINED_RES=\"PARTY_JOINED_RES\"}(a||(a={}));var E=function(e){var t=e.name,n=e.onClick;return c.a.createElement(\"button\",{onClick:n},t)},u=n(5),s=n(21),R=n.n(s),_={LOGIN:\"https://accounts.spotify.com/authorize\",ME:\"https://api.spotify.com/v1/me\",CURRENT_PLAYBACK:\"https://api.spotify.com/v1/me/player\"},m=Object(o.createContext)({user:void 0,isLoading:!1,logout:function(){}}),d=function(e){var t=e.children,n=Object(o.useState)(),a=Object(u.a)(n,2),r=a[0],i=a[1],l=Object(o.useState)(!0),E=Object(u.a)(l,2),s=E[0],d=E[1];Object(o.useEffect)((function(){console.log(\"checklogin\");var e=localStorage.getItem(\"user\");if(e)return i(JSON.parse(e)),void d(!1);window.location.hash&&f()}),[]);var f=function(){var e=function(e){var t=e.substring(1),n={};return t.split(\"&\").map((function(e){var t=e.split(\"=\");n[t[0]]=t[1]})),n}(window.location.hash);R.a.defaults.headers.common.Authorization=\"Bearer \"+e.access_token,R.a.get(_.ME).then((function(e){var t=e.data;i(t),localStorage.setItem(\"user\",JSON.stringify(t))}))},p=function(){i(void 0),localStorage.clear()},v=Object(o.useMemo)((function(){return{user:r,isLoading:s,logout:p}}),[r,p]);return c.a.createElement(m.Provider,{value:v},t)},f=function(){return Object(o.useContext)(m)},p=n(49),v=n.n(p)()(\"http://localhost:8080\"),T=function(){var e=Object(l.f)(),t=f(),n=t.user,r=t.logout;Object(o.useEffect)((function(){v.on(a.CREATE_PARTY_RES,(function(t){e.push(\"/party/\"+t)}))}),[]);return c.a.createElement(\"div\",null,n&&n.id?c.a.createElement(\"div\",null,c.a.createElement(\"div\",null,\"Hi, \",n.id,\"!\"),c.a.createElement(E,{name:\"Logout\",onClick:r}),c.a.createElement(E,{name:\"Create new Room\",onClick:function(){v.emit(a.CREATE_PARTY_REQ,v.id)}})):c.a.createElement(\"a\",{href:\"http://localhost:8080/login\"},\"Login\"))},h=function(e){var t,n=e.match,r=f(),i=r.user,l=r.isLoading,E=Object(o.useState)(0),s=Object(u.a)(E,2),R=s[0],_=s[1],m=Object(o.useState)(void 0),d=Object(u.a)(m,2),p=d[0],T=d[1],h=Object(o.useState)([]),A=Object(u.a)(h,2);A[0],A[1];if(Object(o.useEffect)((function(){v.on(a.PARTY_JOINED_RES,S),v.on(a.PARTY_JOINED_UNAUTHED_RES,g)}),[]),Object(o.useEffect)((function(){console.log(\"changed user in party\",i),i&&v.emit(a.PARTY_JOINED_REQ,{user:i,socketId:v.id,partyId:O})}),[i]),l)return c.a.createElement(\"div\",null,\"Loading...\");var O=n.params.id,S=function(e){console.log(\"party state\",e),T(e)},g=function(e){_(e)};return c.a.createElement(\"div\",null,i&&i.id?c.a.createElement(\"div\",null,c.a.createElement(\"div\",null,\"Hi, \",i.id,\"!\")):c.a.createElement(\"div\",null,\"This is a party of \",R,\", but you aint authed.\"),c.a.createElement(\"div\",null,null===p||void 0===p||null===(t=p.users)||void 0===t?void 0:t.map((function(e){return e.display_name}))))};var A=function(){return c.a.createElement(d,null,c.a.createElement(\"div\",{className:\"App\"},c.a.createElement(\"header\",{className:\"App-header\"}),c.a.createElement(l.c,null,c.a.createElement(l.a,{exact:!0,path:\"/\"},c.a.createElement(T,null)),c.a.createElement(l.a,{path:\"/party/:id\",component:h}))))};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=n(14);i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(O.a,null,c.a.createElement(A,null))),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,n){e.exports=n(111)},57:function(e,t,n){},58:function(e,t,n){}},[[52,1,2]]]);","extractedComments":[]}