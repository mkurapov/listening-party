{"map":{"version":3,"sources":["static/js/main.d8d2678e.chunk.js"],"names":["this","push","105","module","exports","112","__webpack_exports__","__webpack_require__","r","SocketEvent","react","react_default","n","react_dom","react_dom_default","react_router","components_Button","_ref","name","onClick","a","createElement","slicedToArray","axios","axios_default","SPOTIFY_URL","SPOTIFY_API","LOGIN","SPOTIFY_ACCOUNT_URL","ME","CURRENTLY_PLAYING","PLAYER","PLAY","lib","src_socket","lib_default","UserContext","Object","user","undefined","isLoading","logout","UserContext_UserProvider","children","_useState","_useState2","setUser","_useState3","_useState4","setIsLoading","savedUser","localStorage","getItem","savedAccessToken","savedRefreshToken","window","location","hash","login","setAuthheader","_user","JSON","parse","emit","USER_CONNECTED_REQ","id","locationArgs","hashInput","substring","params","split","map","hk","temp","getHashParams","access_token","get","then","res","data","console","log","setItem","stringify","refresh_token","clear","accessToken","defaults","headers","common","SettingsContext","Provider","value","pages_Home","history","_useUser","on","CREATE_PARTY_RES","newPartyId","CREATE_PARTY_REQ","href","APP_URL","Party","Party_default","src_App","className","exact","path","component","Boolean","hostname","match","react_router_dom","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message","52","Error","53","58","59"],"mappings":"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"},"code":"(this[\"webpackJsonplistening-party\"]=this[\"webpackJsonplistening-party\"]||[]).push([[0],{105:function(e,t){},112:function(e,t,n){\"use strict\";n.r(t);var a,r=n(0),o=n.n(r),s=n(48),i=n.n(s),l=(n(58),n(59),n(4));!function(e){e.USER_CONNECTED_REQ=\"USER_CONNECTED_REQ\",e.USER_DISCONNECTED_REQ=\"USER_DISCONNECTED_REQ\",e.CREATE_PARTY_REQ=\"CREATE_PARTY_REQ\",e.CREATE_PARTY_RES=\"CREATE_PARTY_RES\",e.USER_JOINED_RES=\"USER_JOINED_RES\",e.USER_JOINED_REQ=\"USER_JOINED_REQ\",e.USER_LEFT_PARTY_REQ=\"USER_LEFT_PARTY_REQ\",e.USER_LEFT_PARTY_RES=\"USER_LEFT_PARTY_RES\",e.PARTY_JOINED_REQ=\"PARTY_JOINED_REQ\",e.PARTY_JOINED_UNAUTHED_REQ=\"PARTY_JOINED_UNAUTHED_REQ\",e.PARTY_JOINED_UNAUTHED_RES=\"PARTY_JOINED_UNAUTHED_RES\",e.PARTY_JOINED_RES=\"PARTY_JOINED_RES\",e.PARTY_NOT_FOUND_RES=\"PARTY_NOT_FOUND_RES\",e.PARTY_PLAYBACK_CHANGED_RES=\"PARTY_PLAYBACK_CHANGED_RES\",e.PARTY_PLAYBACK_REQ=\"PARTY_PLAYBACK_REQ\",e.PARTY_NEW_USER_JOINED_RES=\"PARTY_NEW_USER_JOINED_RES\"}(a||(a={}));var c=function(e){var t=e.name,n=e.onClick;return o.a.createElement(\"button\",{onClick:n},t)},m=n(23),E=n(20),_=n.n(E),R=\"https://api.spotify.com/v1\",u={LOGIN:\"https://accounts.spotify.com/authorize\",ME:R+\"/me\",CURRENTLY_PLAYING:R+\"/me/player/currently-playing\",PLAYER:R+\"/me/player\",PLAY:R+\"/me/player/play\"},d=n(49),p=n.n(d)()(\"http://localhost:8080\"),b=Object(r.createContext)({user:void 0,isLoading:!1,logout:function(){}}),T=function(e){var t=e.children,n=Object(r.useState)(),s=Object(m.a)(n,2),i=s[0],l=s[1],c=Object(r.useState)(!0),E=Object(m.a)(c,2),R=E[0],d=E[1];Object(r.useEffect)((function(){var e=localStorage.getItem(\"user\"),t=localStorage.getItem(\"access_token\"),n=localStorage.getItem(\"access_token\");if(!e||!t||!n){if(!window.location.hash)return;T()}if(e){O(t);var r=JSON.parse(e);l(r),d(!1),p.emit(a.USER_CONNECTED_REQ,r.id)}}),[]);var T=function(){var e=function(e){var t=e.substring(1),n={};return t.split(\"&\").map((function(e){var t=e.split(\"=\");n[t[0]]=t[1]})),n}(window.location.hash);O(e.access_token),_.a.get(u.ME).then((function(t){var n=t.data;console.log(n),l(n),d(!1),p.emit(a.USER_CONNECTED_REQ,n.id),localStorage.setItem(\"user\",JSON.stringify(n)),localStorage.setItem(\"access_token\",e.access_token),localStorage.setItem(\"refresh_token\",e.refresh_token)}))},A=function(){l(void 0),localStorage.clear()},O=function(e){_.a.defaults.headers.common.Authorization=\"Bearer \"+e},S=Object(r.useMemo)((function(){return{user:i,isLoading:R,logout:A}}),[i,A]);return o.a.createElement(b.Provider,{value:S},t)},A=function(){var e=Object(l.f)(),t=Object(r.useContext)(b),n=t.user,s=t.logout;Object(r.useEffect)((function(){p.on(a.CREATE_PARTY_RES,(function(t){e.push(\"/party/\"+t)}))}),[]);return o.a.createElement(\"div\",null,n&&n.id?o.a.createElement(\"div\",null,o.a.createElement(\"div\",null,\"Hi, \",n.id,\"!\"),o.a.createElement(c,{name:\"Logout\",onClick:s}),o.a.createElement(c,{name:\"Create new Room\",onClick:function(){p.emit(a.CREATE_PARTY_REQ,p.id)}})):o.a.createElement(\"a\",{href:\"http://localhost:8080/login\"},\"Login\"))},O=n(52),S=n.n(O);var g=function(){return o.a.createElement(T,null,o.a.createElement(\"div\",{className:\"App\"},o.a.createElement(\"header\",{className:\"App-header\"}),o.a.createElement(l.c,null,o.a.createElement(l.a,{exact:!0,path:\"/\"},o.a.createElement(A,null)),o.a.createElement(l.a,{path:\"/party/:id\",component:S.a}))))};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var N=n(13);i.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(N.a,null,o.a.createElement(g,null))),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t){throw new Error(\"Module build failed (from ./node_modules/babel-loader/lib/index.js):\\nSyntaxError: /Users/max/dev/listening-party/client/src/pages/Party.tsx: Unexpected token (28:4)\\n\\n\\x1b[0m \\x1b[90m 26 | \\x1b[39m    \\x1b[36mconst\\x1b[39m events \\x1b[33m=\\x1b[39m [\\x1b[0m\\n\\x1b[0m \\x1b[90m 27 | \\x1b[39m        \\x1b[33mSocketEvent\\x1b[39m\\x1b[33m.\\x1b[39m\\x1b[33mUSER_LEFT_PARTY_RES\\x1b[39m\\x1b[33m:\\x1b[39m\\x1b[0m\\n\\x1b[0m\\x1b[31m\\x1b[1m>\\x1b[22m\\x1b[39m\\x1b[90m 28 | \\x1b[39m    ]\\x1b[0m\\n\\x1b[0m \\x1b[90m    | \\x1b[39m    \\x1b[31m\\x1b[1m^\\x1b[22m\\x1b[39m\\x1b[0m\\n\\x1b[0m \\x1b[90m 29 | \\x1b[39m\\x1b[0m\\n\\x1b[0m \\x1b[90m 30 | \\x1b[39m    \\x1b[36mconst\\x1b[39m onUserLeftParty \\x1b[33m=\\x1b[39m (party\\x1b[33m:\\x1b[39m \\x1b[33mParty\\x1b[39m) \\x1b[33m=>\\x1b[39m {\\x1b[0m\\n\\x1b[0m \\x1b[90m 31 | \\x1b[39m        console\\x1b[33m.\\x1b[39mlog(\\x1b[32m'A user left party.'\\x1b[39m)\\x1b[33m;\\x1b[39m\\x1b[0m\\n    at Object._raise (/Users/max/dev/listening-party/client/node_modules/@babel/parser/lib/index.js:742:17)\\n    at Object.raiseWithData (/Users/max/dev/listening-party/client/node_modules/@babel/parser/lib/index.js:735:17)\\n    at Object.raise (/Users/max/dev/listening-party/client/node_modules/@babel/parser/lib/index.js:729:17)\\n    at Object.unexpected (/Users/max/dev/listening-party/client/node_modules/@babel/parser/lib/index.js:8752:16)\\n    at Object.tsParseNonArrayType (/Users/max/dev/listening-party/client/node_modules/@babel/parser/lib/index.js:5585:16)\\n    at Object.tsParseArrayTypeOrHigher (/Users/max/dev/listening-party/client/node_modules/@babel/parser/lib/index.js:5589:21)\\n    at Object.tsParseTypeOperatorOrHigher (/Users/max/dev/listening-party/client/node_modules/@babel/parser/lib/index.js:5644:120)\\n    at Object.tsParseUnionOrIntersectionType (/Users/max/dev/listening-party/client/node_modules/@babel/parser/lib/index.js:5649:16)\\n    at Object.tsParseIntersectionTypeOrHigher (/Users/max/dev/listening-party/client/node_modules/@babel/parser/lib/index.js:5667:17)\\n    at Object.tsParseUnionOrIntersectionType (/Users/max/dev/listening-party/client/node_modules/@babel/parser/lib/index.js:5649:16)\")},53:function(e,t,n){e.exports=n(112)},58:function(e,t,n){},59:function(e,t,n){}},[[53,1,2]]]);","extractedComments":[]}