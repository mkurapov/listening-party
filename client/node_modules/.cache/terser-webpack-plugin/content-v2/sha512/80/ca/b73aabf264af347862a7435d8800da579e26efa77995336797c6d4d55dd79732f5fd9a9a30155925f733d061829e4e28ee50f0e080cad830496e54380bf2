{"map":{"version":3,"sources":["static/js/main.5d030d54.chunk.js"],"names":["this","push","104","module","exports","111","__webpack_exports__","__webpack_require__","r","SocketEvent","react","react_default","n","react_dom","react_dom_default","react_router","components_Button","_ref","name","onClick","a","createElement","slicedToArray","axios","axios_default","SPOTIFY_URL","SPOTIFY_API","LOGIN","SPOTIFY_ACCOUNT_URL","ME","CURRENTLY_PLAYING","PLAYER","lib","src_socket","lib_default","UserContext","Object","user","undefined","isLoading","logout","UserContext_UserProvider","children","_useState","_useState2","setUser","_useState3","_useState4","setIsLoading","savedUser","localStorage","getItem","savedAccessToken","savedRefreshToken","window","location","hash","login","setAuthheader","JSON","parse","emit","USER_CONNECTED_REQ","id","locationArgs","hashInput","substring","params","split","map","hk","temp","getHashParams","access_token","get","then","res","data","console","log","setItem","stringify","refresh_token","clear","accessToken","defaults","headers","common","SettingsContext","Provider","value","UserContext_useUser","pages_Home","history","_useUser","on","CREATE_PARTY_RES","newPartyId","CREATE_PARTY_REQ","href","APP_URL","Party","_party$adminUser2","_party$users","match","party","setParty","partyId","PARTY_JOINED_RES","_party$adminUser","adminUser","getCurrentlyPlaying","USER_LEFT_PARTY_RES","PARTY_NOT_FOUND_RES","setTimeout","USER_LEFT_PARTY_REQ","PARTY_JOINED_REQ","socketId","users","display_name","join","src_App","className","exact","path","component","Boolean","hostname","react_router_dom","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error","message","52","57","58"],"mappings":"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"},"code":"(this[\"webpackJsonplistening-party\"]=this[\"webpackJsonplistening-party\"]||[]).push([[0],{104:function(e,t){},111:function(e,t,n){\"use strict\";n.r(t);var a,o=n(0),i=n.n(o),c=n(48),r=n.n(c),E=(n(57),n(58),n(4));!function(e){e.USER_CONNECTED_REQ=\"USER_CONNECTED_REQ\",e.USER_DISCONNECTED_REQ=\"USER_DISCONNECTED_REQ\",e.CREATE_PARTY_REQ=\"CREATE_PARTY_REQ\",e.CREATE_PARTY_RES=\"CREATE_PARTY_RES\",e.USER_JOINED_RES=\"USER_JOINED_RES\",e.USER_JOINED_REQ=\"USER_JOINED_REQ\",e.USER_LEFT_PARTY_REQ=\"USER_LEFT_PARTY_REQ\",e.USER_LEFT_PARTY_RES=\"USER_LEFT_PARTY_RES\",e.PARTY_JOINED_REQ=\"PARTY_JOINED_REQ\",e.PARTY_JOINED_UNAUTHED_REQ=\"PARTY_JOINED_UNAUTHED_REQ\",e.PARTY_JOINED_UNAUTHED_RES=\"PARTY_JOINED_UNAUTHED_RES\",e.PARTY_JOINED_RES=\"PARTY_JOINED_RES\",e.PARTY_NOT_FOUND_RES=\"PARTY_NOT_FOUND_RES\"}(a||(a={}));var l=function(e){var t=e.name,n=e.onClick;return i.a.createElement(\"button\",{onClick:n},t)},u=n(9),s=n(8),_=n.n(s),R=\"https://api.spotify.com/v1\",d={LOGIN:\"https://accounts.spotify.com/authorize\",ME:R+\"/me\",CURRENTLY_PLAYING:R+\"/me/player/currently-playing\",PLAYER:R+\"/me/player\"},m=n(49),T=n.n(m)()(\"http://localhost:8080\"),f=Object(o.createContext)({user:void 0,isLoading:!1,logout:function(){}}),S=function(e){var t=e.children,n=Object(o.useState)(),c=Object(u.a)(n,2),r=c[0],E=c[1],l=Object(o.useState)(!0),s=Object(u.a)(l,2),R=s[0],m=s[1];Object(o.useEffect)((function(){var e=localStorage.getItem(\"user\"),t=localStorage.getItem(\"access_token\"),n=localStorage.getItem(\"access_token\");if(!e||!t||!n){if(!window.location.hash)return;S()}N(t);var o=JSON.parse(e);E(o),m(!1),T.emit(a.USER_CONNECTED_REQ,o.id)}),[]);var S=function(){var e=function(e){var t=e.substring(1),n={};return t.split(\"&\").map((function(e){var t=e.split(\"=\");n[t[0]]=t[1]})),n}(window.location.hash);N(e.access_token),_.a.get(d.ME).then((function(t){var n=t.data;console.log(n),E(n),m(!1),T.emit(a.USER_CONNECTED_REQ,n.id),localStorage.setItem(\"user\",JSON.stringify(n)),localStorage.setItem(\"access_token\",e.access_token),localStorage.setItem(\"refresh_token\",e.refresh_token)}))},v=function(){E(void 0),localStorage.clear()},N=function(e){_.a.defaults.headers.common.Authorization=\"Bearer \"+e},O=Object(o.useMemo)((function(){return{user:r,isLoading:R,logout:v}}),[r,v]);return i.a.createElement(f.Provider,{value:O},t)},v=function(){return Object(o.useContext)(f)},N=function(){var e=Object(E.f)(),t=v(),n=t.user,c=t.logout;Object(o.useEffect)((function(){T.on(a.CREATE_PARTY_RES,(function(t){e.push(\"/party/\"+t)}))}),[]);return i.a.createElement(\"div\",null,n&&n.id?i.a.createElement(\"div\",null,i.a.createElement(\"div\",null,\"Hi, \",n.id,\"!\"),i.a.createElement(l,{name:\"Logout\",onClick:c}),i.a.createElement(l,{name:\"Create new Room\",onClick:function(){T.emit(a.CREATE_PARTY_REQ,T.id)}})):i.a.createElement(\"a\",{href:\"http://localhost:8080/login\"},\"Login\"))},O=function(e){var t,n,c=e.match,r=v(),l=r.user,s=r.isLoading,R=Object(o.useState)(void 0),m=Object(u.a)(R,2),f=m[0],S=m[1],N=c.params.id,O=Object(E.f)();T.on(a.PARTY_JOINED_RES,(function(e){var t;console.log(\"USER JOINED PARTY\",e),S(e),(null===(t=e.adminUser)||void 0===t?void 0:t.id)===(null===l||void 0===l?void 0:l.id)&&p()})),T.on(a.USER_LEFT_PARTY_RES,(function(e){console.log(\"USER LEFT PARTY\",e),S(e)})),T.on(a.PARTY_NOT_FOUND_RES,(function(e){console.log(\"This party was not found... redirecting back\"),setTimeout((function(){O.push(\"/\")}),2e3)})),Object(o.useEffect)((function(){return console.log(\"loaded party first time\"),function(){T.emit(a.USER_LEFT_PARTY_REQ)}}),[]);var p=function(){_.a.get(d.CURRENTLY_PLAYING).then((function(e){console.log(e)}))};return Object(o.useEffect)((function(){l&&!s?(console.log(\"Logged in as \",l.id),T.emit(a.PARTY_JOINED_REQ,{user:l,socketId:T.id,partyId:N})):console.log(\"You are not authed\")}),[l]),i.a.createElement(\"div\",null,l&&l.id?i.a.createElement(\"div\",null,i.a.createElement(\"h1\",null,\"A duper dope party\"),i.a.createElement(\"div\",null,\"Hi, \",l.id,\"!\"),i.a.createElement(\"div\",null,\"The party admin is: $\",null===f||void 0===f||null===(t=f.adminUser)||void 0===t?void 0:t.id),i.a.createElement(\"div\",null,\"Users in here: \",null===f||void 0===f||null===(n=f.users)||void 0===n?void 0:n.map((function(e){return e.display_name})).join(\", \"))):i.a.createElement(\"div\",null,\"This is a party, but you aint authed.\"))};var p=function(){return i.a.createElement(S,null,i.a.createElement(\"div\",{className:\"App\"},i.a.createElement(\"header\",{className:\"App-header\"}),i.a.createElement(E.c,null,i.a.createElement(E.a,{exact:!0,path:\"/\"},i.a.createElement(N,null)),i.a.createElement(E.a,{path:\"/party/:id\",component:O}))))};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=n(15);r.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(A.a,null,i.a.createElement(p,null))),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,n){e.exports=n(111)},57:function(e,t,n){},58:function(e,t,n){}},[[52,1,2]]]);","extractedComments":[]}