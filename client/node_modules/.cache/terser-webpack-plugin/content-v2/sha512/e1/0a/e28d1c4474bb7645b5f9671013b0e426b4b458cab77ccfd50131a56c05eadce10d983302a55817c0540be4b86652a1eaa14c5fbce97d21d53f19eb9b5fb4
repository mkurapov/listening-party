{"map":{"version":3,"sources":["static/js/main.489a350b.chunk.js"],"names":["this","push","104","module","exports","111","__webpack_exports__","__webpack_require__","r","SocketEvent","react","react_default","n","react_dom","react_dom_default","react_router","components_Button","_ref","name","onClick","a","createElement","slicedToArray","axios","axios_default","getTimeWithMinutesOffset","minutes","Date","getTime","SPOTIFY_URL","APP_URL","APP_API","ROOT","REFRESH_TOKEN","LOGIN","SPOTIFY_API","SPOTIFY_ACCOUNT_URL","ME","CURRENTLY_PLAYING","PLAYER","PLAY","PAUSE","lib","src_socket","lib_default","UserContext","Object","user","undefined","isLoading","logout","UserContext_UserProvider","storedUser","storedAccessToken","storedRefreshToken","children","_useState","_useState2","setUser","_useState3","_useState4","setIsLoading","localStorage","getItem","window","location","hash","console","log","login","parsedUser","JSON","parse","expiryDate","parseInt","getNewAccessToken","then","res","updateUser","setAuthheader","data","access_token","setItem","toString","locationArgs","hashInput","substring","params","split","map","hk","temp","getHashParams","get","stringify","refresh_token","emit","USER_LOGGEDIN_REQ","id","clear","refreshToken","accessToken","defaults","headers","common","SettingsContext","Provider","value","UserContext_useUser","pages_Home","history","_useUser","on","CREATE_PARTY_RES","newPartyId","CREATE_PARTY_REQ","href","imageStyle","width","height","Party","_currentParty$adminUs","_currentParty$users","_currentParty$playbac4","_currentParty$playbac5","pollCurrentlyPlaying","match","currentParty","setCurrentParty","partyId","handleUserLeaving","display_name","USER_LEFT_PARTY_RES","onUserLeftParty","PARTY_PLAYBACK_CHANGED_RES","onPlaybackChanged","PARTY_NOT_FOUND_RES","onPartyNotFound","PARTY_NEW_USER_JOINED_RES","onNewUserJoined","PARTY_JOINED_RES","onPartyJoined","PARTY_CHANGED_ADMIN_RES","onAdminChanged","PARTY_JOINED_REQ","socketId","party","_party$adminUser","adminUser","playbackState","_currentParty$playbac","_currentParty$playbac2","_currentParty$playbac3","isNowPlaying","is_playing","isNowPaused","isNewSong","item","playSong","pauseSong","_party$users","users","length","setTimeout","_party$adminUser2","clearInterval","setInterval","getCurrentlyPlaying","off","USER_LEFT_PARTY_REQ","isFirstTime","arguments","args","uris","uri","position_ms","progress_ms","put","catch","err","error","response","reason","PARTY_PLAYBACK_REQ","join","className","album","artists","style","src","images","url","src_App","exact","path","component","Boolean","hostname","react_router_dom","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","message","52","57","58"],"mappings":"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"},"code":"(this[\"webpackJsonplistening-party\"]=this[\"webpackJsonplistening-party\"]||[]).push([[0],{104:function(e,t){},111:function(e,t,n){\"use strict\";n.r(t);var a,o=n(0),l=n.n(o),i=n(48),r=n.n(i),c=(n(57),n(58),n(4));!function(e){e.USER_LOGGEDIN_REQ=\"USER_LOGGEDIN_REQ\",e.USER_DISCONNECTED_REQ=\"USER_DISCONNECTED_REQ\",e.CREATE_PARTY_REQ=\"CREATE_PARTY_REQ\",e.CREATE_PARTY_RES=\"CREATE_PARTY_RES\",e.USER_JOINED_RES=\"USER_JOINED_RES\",e.USER_JOINED_REQ=\"USER_JOINED_REQ\",e.USER_LEFT_PARTY_REQ=\"USER_LEFT_PARTY_REQ\",e.USER_LEFT_PARTY_RES=\"USER_LEFT_PARTY_RES\",e.PARTY_JOINED_REQ=\"PARTY_JOINED_REQ\",e.PARTY_JOINED_UNAUTHED_REQ=\"PARTY_JOINED_UNAUTHED_REQ\",e.PARTY_JOINED_UNAUTHED_RES=\"PARTY_JOINED_UNAUTHED_RES\",e.PARTY_JOINED_RES=\"PARTY_JOINED_RES\",e.PARTY_NOT_FOUND_RES=\"PARTY_NOT_FOUND_RES\",e.PARTY_PLAYBACK_CHANGED_RES=\"PARTY_PLAYBACK_CHANGED_RES\",e.PARTY_PLAYBACK_REQ=\"PARTY_PLAYBACK_REQ\",e.PARTY_NEW_USER_JOINED_RES=\"PARTY_NEW_USER_JOINED_RES\",e.PARTY_CHANGED_ADMIN_RES=\"PARTY_CHANGED_ADMIN_RES\"}(a||(a={}));var E=function(e){var t=e.name,n=e.onClick;return l.a.createElement(\"button\",{onClick:n},t)},s=n(9),u=n(5),_=n.n(u),R=function(e){return new Date((new Date).getTime()+60*e*1e3)},d=\"https://api.spotify.com/v1\",m=\"http://localhost:8080\",g={ROOT:m,REFRESH_TOKEN:m+\"/refresh_token\",LOGIN:m+\"/login\"},p={LOGIN:\"https://accounts.spotify.com/authorize\",ME:d+\"/me\",CURRENTLY_PLAYING:d+\"/me/player/currently-playing\",PLAYER:d+\"/me/player\",PLAY:d+\"/me/player/play\",PAUSE:d+\"/me/player/pause\"},S=n(49),v=n.n(S)()(g.ROOT),A=Object(o.createContext)({user:void 0,isLoading:!1,logout:function(){}}),f=function(e){var t,n,i,r=e.children,c=Object(o.useState)(),E=Object(s.a)(c,2),u=E[0],d=E[1],m=Object(o.useState)(!0),S=Object(s.a)(m,2),f=S[0],T=S[1];Object(o.useEffect)((function(){if(t=localStorage.getItem(\"user\"),n=localStorage.getItem(\"access_token\"),i=localStorage.getItem(\"refresh_token\"),!t||!n||!i){if(!window.location.hash)return;return console.log(\"loggin in ...\"),void y()}var e=JSON.parse(t),a=localStorage.getItem(\"expiry_time\");a&&(new Date).getTime()>parseInt(a)?(console.log(\"expired\"),h(i).then((function(t){N(e),O(t.data.access_token),localStorage.setItem(\"access_token\",t.data.access_token),localStorage.setItem(\"expiry_time\",R(59).getTime().toString())}))):(O(n),N(e))}),[]);var y=function(){var e=function(e){var t=e.substring(1),n={};return t.split(\"&\").map((function(e){var t=e.split(\"=\");n[t[0]]=t[1]})),n}(window.location.hash);O(e.access_token),_.a.get(p.ME).then((function(t){N(t.data),localStorage.setItem(\"user\",JSON.stringify(t.data)),localStorage.setItem(\"access_token\",e.access_token),localStorage.setItem(\"refresh_token\",e.refresh_token),localStorage.setItem(\"expiry_time\",R(1).getTime().toString())}))},N=function(e){d(e),T(!1),v.emit(a.USER_LOGGEDIN_REQ,e.id)},P=function(){d(void 0),localStorage.clear()},h=function(e){return _.a.get(g.REFRESH_TOKEN,{params:{refresh_token:e}})},O=function(e){_.a.defaults.headers.common.Authorization=\"Bearer \"+e},Y=Object(o.useMemo)((function(){return{user:u,isLoading:f,logout:P}}),[u,P]);return l.a.createElement(A.Provider,{value:Y},r)},T=function(){return Object(o.useContext)(A)},y=function(){var e=Object(c.f)(),t=T(),n=t.user,i=t.logout;Object(o.useEffect)((function(){v.on(a.CREATE_PARTY_RES,(function(t){e.push(\"/party/\"+t)}))}),[]);return l.a.createElement(\"div\",null,n&&n.id?l.a.createElement(\"div\",null,l.a.createElement(\"div\",null,\"Hi, \",n.id,\"!\"),l.a.createElement(E,{name:\"Logout\",onClick:i}),l.a.createElement(E,{name:\"Create new Room\",onClick:function(){v.emit(a.CREATE_PARTY_REQ,v.id)}})):l.a.createElement(\"a\",{href:g.LOGIN},\"Login\"))},N={width:\"100vw\",height:\"auto\"},P=function(e){var t,n,i,r,E,u=e.match,R=T(),d=R.user,m=R.isLoading,g=Object(o.useState)(void 0),S=Object(s.a)(g,2),A=S[0],f=S[1],y=u.params.id,P=Object(c.f)();Object(o.useEffect)((function(){return function(){return k()}}),[]),Object(o.useEffect)((function(){d&&!m?(console.log(\"Logged in as \",d.display_name),v.on(a.USER_LEFT_PARTY_RES,h),v.on(a.PARTY_PLAYBACK_CHANGED_RES,O),v.on(a.PARTY_NOT_FOUND_RES,I),v.on(a.PARTY_NEW_USER_JOINED_RES,Y),v.on(a.PARTY_JOINED_RES,D),v.on(a.PARTY_CHANGED_ADMIN_RES,b),v.emit(a.PARTY_JOINED_REQ,{user:d,socketId:v.id,partyId:y})):m||console.log(\"You are not authed\")}),[d]);var h=function(e){console.log(\"A user left party.\"),f(e)},O=function(e){var t;if(console.log(\"Playback state changed.\"),!((null===(t=e.adminUser)||void 0===t?void 0:t.id)===(null===d||void 0===d?void 0:d.id))&&e.playbackState){var n,a,o;console.log(null===A||void 0===A?void 0:A.playbackState),console.log(e.playbackState);var l=e.playbackState.is_playing&&!(null===A||void 0===A||null===(n=A.playbackState)||void 0===n?void 0:n.is_playing),i=!e.playbackState.is_playing&&(null===A||void 0===A||null===(a=A.playbackState)||void 0===a?void 0:a.is_playing),r=(null===A||void 0===A||null===(o=A.playbackState)||void 0===o?void 0:o.item.id)!==e.playbackState.item.id;console.log(l,i,r),l||r?U(e.playbackState):i&&C()}f(e)},Y=function(e){var t;console.log(\"New user joined,\",e.users?e.users[(null===(t=e.users)||void 0===t?void 0:t.length)-1].display_name:\"\"),f(e)},I=function(){console.log(\"This party was not found... redirecting back\"),setTimeout((function(){P.push(\"/\")}),2e3)},D=function(e){f(e),e.playbackState&&e.playbackState.is_playing&&U(e.playbackState,!0)},b=function(e){var t;clearInterval(E),(null===(t=e.adminUser)||void 0===t?void 0:t.id)===(null===d||void 0===d?void 0:d.id)&&(console.log(\"Youve been assigned admin.\"),E=setInterval((function(){L(e.id)}),5e3)),f(e)},k=function(){v.off(a.USER_LEFT_PARTY_RES,h),v.off(a.PARTY_PLAYBACK_CHANGED_RES,O),v.off(a.PARTY_NOT_FOUND_RES,I),v.off(a.PARTY_NEW_USER_JOINED_RES,Y),v.off(a.PARTY_JOINED_RES,D),v.off(a.PARTY_CHANGED_ADMIN_RES,b),console.log(\"Leaving party.\"),clearInterval(E),v.emit(a.USER_LEFT_PARTY_REQ)},U=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];console.log(\"setting currently playing...\",e);var n={uris:[e.item.uri],position_ms:t?e.progress_ms:0};console.log(n),_.a.put(p.PLAY,n).then((function(){return console.log(\"Playing new song: \",e.item.name)})).catch((function(e){var t=e.response.data.error;\"NO_ACTIVE_DEVICE\"===t.reason?console.log(\"Could not play song. No active device found.\"):\"PREMIUM_REQUIRED\"===t.reason?console.log(\"Could not play song. Premium required.\"):console.log(\"Could not play song. Error: \",t)}))},C=function(){_.a.put(p.PAUSE).then((function(){return console.log(\"Paused song.\")})).catch((function(e){var t=e.response.data.error;console.log(\"Could not pause song: \",t)}))},L=function(e){console.log(\"Getting currently playing...\"),_.a.get(p.CURRENTLY_PLAYING).then((function(t){t.data&&t.data.item?v.emit(a.PARTY_PLAYBACK_REQ,{playbackState:t.data,partyId:e}):console.log(\"Nothing is playing, its an ad, or you are in private mode.\")})).catch((function(e){console.log(\"could not get currently playing\")}))};return console.log(A),l.a.createElement(\"div\",null,d&&d.id?l.a.createElement(\"div\",null,l.a.createElement(\"h1\",null,\"A duper dope party\"),l.a.createElement(\"h2\",null,\"Hi, \",d.display_name,\"!\"),l.a.createElement(\"div\",null,\"The DJ is \",null===A||void 0===A||null===(t=A.adminUser)||void 0===t?void 0:t.display_name),l.a.createElement(\"div\",null,\"Users in party: \",null===A||void 0===A||null===(n=A.users)||void 0===n?void 0:n.map((function(e){return e.display_name})).join(\", \")),(null===A||void 0===A?void 0:A.playbackState)?l.a.createElement(\"div\",null,l.a.createElement(\"div\",{className:\"song\"},\"Currently playing\"),l.a.createElement(\"h3\",null,null===A||void 0===A||null===(i=A.playbackState)||void 0===i?void 0:i.item.name),l.a.createElement(\"h3\",null,null===A||void 0===A||null===(r=A.playbackState)||void 0===r?void 0:r.item.album.artists[0].name),l.a.createElement(\"img\",{style:N,src:A.playbackState.item.album.images[0].url}),l.a.createElement(\"div\",null,A.playbackState.is_playing?\"Playing\":\"Paused\")):l.a.createElement(\"div\",null,\"No tracks playing\")):l.a.createElement(\"div\",null,\"This is a party, but you aint authed.\"))};var h=function(){return l.a.createElement(f,null,l.a.createElement(\"div\",{className:\"App\"},l.a.createElement(\"header\",{className:\"App-header\"}),l.a.createElement(c.c,null,l.a.createElement(c.a,{exact:!0,path:\"/\"},l.a.createElement(y,null)),l.a.createElement(c.a,{path:\"/party/:id\",component:P}))))};Boolean(\"localhost\"===window.location.hostname||\"[::1]\"===window.location.hostname||window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var O=n(15);r.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(O.a,null,l.a.createElement(h,null))),document.getElementById(\"root\")),\"serviceWorker\"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},52:function(e,t,n){e.exports=n(111)},57:function(e,t,n){},58:function(e,t,n){}},[[52,1,2]]]);","extractedComments":[]}