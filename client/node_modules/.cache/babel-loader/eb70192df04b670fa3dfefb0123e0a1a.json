{"ast":null,"code":"var _jsxFileName = \"/Users/max/dev/listening-party/client/src/pages/Party.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport { EventType } from '../common';\nimport { useUser } from '../contexts/UserContext';\nimport socket from '../socket';\n\nconst PartyPage = ({\n  match\n}) => {\n  var _party$users;\n\n  const {\n    user\n  } = useUser();\n  const partyId = match.params.id;\n  const [numberOfUsers, setNumberOfUsers] = useState(0);\n  const [party, setParty] = useState(undefined);\n  console.log(partyId);\n  const [usersInParty, setUsersInParty] = useState([]);\n  useEffect(() => {\n    console.log(user);\n\n    if (user) {\n      const args = {\n        user: user,\n        socketId: socket.id,\n        partyId: partyId\n      };\n      console.log(args);\n      socket.emit(EventType.PARTY_JOINED_REQ, args);\n    } else {\n      socket.emit(EventType.PARTY_JOINED_UNAUTHED_REQ, {\n        socketId: socket.id,\n        partyId: partyId\n      });\n    } // init listeners\n\n\n    socket.on(EventType.PARTY_JOINED_RES, onPartyJoined);\n    socket.on(EventType.PARTY_JOINED_UNAUTHED_RES, onPartyJoinedUnauthed);\n  }, []);\n\n  const onPartyJoined = party => {\n    console.log('party state', party);\n    setParty(party);\n  };\n\n  const onPartyJoinedUnauthed = numberOfUsers => {\n    setNumberOfUsers(numberOfUsers);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, user && user.id ? /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 21\n    }\n  }, \"Hi, \", user.id, \"!\")) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 17\n    }\n  }, \"This is a party of \", numberOfUsers, \", but you aint authed.\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, party === null || party === void 0 ? void 0 : (_party$users = party.users) === null || _party$users === void 0 ? void 0 : _party$users.map(user => user.display_name)));\n};\n\nexport default PartyPage;","map":{"version":3,"sources":["/Users/max/dev/listening-party/client/src/pages/Party.tsx"],"names":["React","useEffect","useState","EventType","useUser","socket","PartyPage","match","user","partyId","params","id","numberOfUsers","setNumberOfUsers","party","setParty","undefined","console","log","usersInParty","setUsersInParty","args","socketId","emit","PARTY_JOINED_REQ","PARTY_JOINED_UNAUTHED_REQ","on","PARTY_JOINED_RES","onPartyJoined","PARTY_JOINED_UNAUTHED_RES","onPartyJoinedUnauthed","users","map","display_name"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AAGA,SAASC,SAAT,QAAiC,WAAjC;AAMA,SAASC,OAAT,QAAwB,yBAAxB;AACA,OAAOC,MAAP,MAAmB,WAAnB;;AAOA,MAAMC,SAA0B,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAmC;AAAA;;AAClE,QAAM;AAAEC,IAAAA;AAAF,MAAWJ,OAAO,EAAxB;AACA,QAAMK,OAAO,GAAGF,KAAK,CAACG,MAAN,CAAaC,EAA7B;AAEA,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCX,QAAQ,CAAC,CAAD,CAAlD;AACA,QAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAoBc,SAApB,CAAlC;AAEAC,EAAAA,OAAO,CAACC,GAAR,CAAYT,OAAZ;AAGA,QAAM,CAACU,YAAD,EAAeC,eAAf,IAAkClB,QAAQ,CAAS,EAAT,CAAhD;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACZgB,IAAAA,OAAO,CAACC,GAAR,CAAYV,IAAZ;;AACA,QAAIA,IAAJ,EAAU;AACN,YAAMa,IAAI,GAAG;AAAEb,QAAAA,IAAI,EAAEA,IAAR;AAAcc,QAAAA,QAAQ,EAAEjB,MAAM,CAACM,EAA/B;AAAmCF,QAAAA,OAAO,EAAEA;AAA5C,OAAb;AACAQ,MAAAA,OAAO,CAACC,GAAR,CAAYG,IAAZ;AACAhB,MAAAA,MAAM,CAACkB,IAAP,CAAYpB,SAAS,CAACqB,gBAAtB,EAAwCH,IAAxC;AACH,KAJD,MAIO;AACHhB,MAAAA,MAAM,CAACkB,IAAP,CAAYpB,SAAS,CAACsB,yBAAtB,EAAiD;AAAEH,QAAAA,QAAQ,EAAEjB,MAAM,CAACM,EAAnB;AAAuBF,QAAAA,OAAO,EAAEA;AAAhC,OAAjD;AACH,KARW,CAUZ;;;AACAJ,IAAAA,MAAM,CAACqB,EAAP,CAAUvB,SAAS,CAACwB,gBAApB,EAAsCC,aAAtC;AACAvB,IAAAA,MAAM,CAACqB,EAAP,CAAUvB,SAAS,CAAC0B,yBAApB,EAA+CC,qBAA/C;AACH,GAbQ,EAaN,EAbM,CAAT;;AAeA,QAAMF,aAAa,GAAId,KAAD,IAAkB;AACpCG,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BJ,KAA3B;AACAC,IAAAA,QAAQ,CAACD,KAAD,CAAR;AACH,GAHD;;AAKA,QAAMgB,qBAAqB,GAAIlB,aAAD,IAA2B;AACrDC,IAAAA,gBAAgB,CAACD,aAAD,CAAhB;AACH,GAFD;;AAIA,sBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACKJ,IAAI,IAAIA,IAAI,CAACG,EAAb,gBACG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAAUH,IAAI,CAACG,EAAf,MADJ,CADH,gBAKG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,4BAAyBC,aAAzB,2BANR,eAOI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAME,KAAN,aAAMA,KAAN,uCAAMA,KAAK,CAAEiB,KAAb,iDAAM,aAAcC,GAAd,CAAkBxB,IAAI,IAAIA,IAAI,CAACyB,YAA/B,CAAN,CAPJ,CADJ;AAWH,CA/CD;;AAiDA,eAAe3B,SAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport io from 'socket.io-client'\nimport { EventType, Party } from '../common';\nimport axios from 'axios';\nimport Button from '../components/Button';\nimport { getHashParams } from '../helpers/helpers';\nimport { withRouter, match } from 'react-router';\n\nimport { useUser } from '../contexts/UserContext';\nimport socket from '../socket';\nimport { User } from '../common';\n\ninterface Props {\n    match: any;\n}\n\nconst PartyPage: React.FC<Props> = ({ match }): React.ReactElement => {\n    const { user } = useUser();\n    const partyId = match.params.id;\n\n    const [numberOfUsers, setNumberOfUsers] = useState(0);\n    const [party, setParty] = useState<Party | undefined>(undefined);\n\n    console.log(partyId);\n\n\n    const [usersInParty, setUsersInParty] = useState<User[]>([]);\n\n    useEffect(() => {\n        console.log(user);\n        if (user) {\n            const args = { user: user, socketId: socket.id, partyId: partyId };\n            console.log(args);\n            socket.emit(EventType.PARTY_JOINED_REQ, args)\n        } else {\n            socket.emit(EventType.PARTY_JOINED_UNAUTHED_REQ, { socketId: socket.id, partyId: partyId })\n        }\n\n        // init listeners\n        socket.on(EventType.PARTY_JOINED_RES, onPartyJoined);\n        socket.on(EventType.PARTY_JOINED_UNAUTHED_RES, onPartyJoinedUnauthed);\n    }, [])\n\n    const onPartyJoined = (party: Party) => {\n        console.log('party state', party);\n        setParty(party);\n    }\n\n    const onPartyJoinedUnauthed = (numberOfUsers: number) => {\n        setNumberOfUsers(numberOfUsers);\n    }\n\n    return (\n        <div>\n            {user && user.id ?\n                <div>\n                    <div>Hi, {user.id}!</div>\n                </div>\n                :\n                <div>This is a party of {numberOfUsers}, but you aint authed.</div>}\n            <div>{party?.users?.map(user => user.display_name)}</div>\n        </div>);\n\n};\n\nexport default PartyPage;\n"]},"metadata":{},"sourceType":"module"}