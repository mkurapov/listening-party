{"ast":null,"code":"import _slicedToArray from\"/Users/max/dev/listening-party/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{SocketEvent}from'../common';import axios from'axios';import{useHistory}from'react-router';import{useUser}from'../contexts/UserContext';import socket from'../socket';import{SPOTIFY_API}from'../const';var PartyPage=function PartyPage(_ref){var _currentParty$adminUs,_currentParty$users,_currentParty$playbac,_currentParty$playbac2;var match=_ref.match;var _useUser=useUser(),user=_useUser.user,isLoading=_useUser.isLoading;var _useState=useState(undefined),_useState2=_slicedToArray(_useState,2),currentParty=_useState2[0],setCurrentParty=_useState2[1];var partyId=match.params.id;var history=useHistory();var pollCurrentlyPlaying;var onUserLeftParty=function onUserLeftParty(party){var _party$adminUser;console.log('A user left party.');if(party&&((_party$adminUser=party.adminUser)===null||_party$adminUser===void 0?void 0:_party$adminUser.id)===(user===null||user===void 0?void 0:user.id)){console.log('Youve been assigned admin.');clearInterval(pollCurrentlyPlaying);pollCurrentlyPlaying=setInterval(function(){getCurrentlyPlaying(party.id);},5000);}setCurrentParty(party);};var onPlaybackChanged=function onPlaybackChanged(party){var _party$adminUser2;console.log('Playback state changed.');var isAdminUser=((_party$adminUser2=party.adminUser)===null||_party$adminUser2===void 0?void 0:_party$adminUser2.id)===(user===null||user===void 0?void 0:user.id);if(!isAdminUser){if(party.playbackState){setCurrentlyPlaying(party.playbackState);}}setCurrentParty(party);};var onNewUserJoined=function onNewUserJoined(party){var _party$users;console.log('New user joined,',party.users?party.users[((_party$users=party.users)===null||_party$users===void 0?void 0:_party$users.length)-1]:'');setCurrentParty(party);};var onPartyNotFound=function onPartyNotFound(){console.log('This party was not found... redirecting back');setTimeout(function(){history.push('/');},2000);};var onPartyJoined=function onPartyJoined(party){var _party$adminUser3;if(((_party$adminUser3=party.adminUser)===null||_party$adminUser3===void 0?void 0:_party$adminUser3.id)===(user===null||user===void 0?void 0:user.id)){pollCurrentlyPlaying=setInterval(function(){getCurrentlyPlaying(party.id);},5000);}setCurrentParty(party);if(party.playbackState&&party.playbackState.is_playing){setCurrentlyPlaying(party.playbackState);}};useEffect(function(){console.log('loaded party first time');socket.on(SocketEvent.USER_LEFT_PARTY_RES,onUserLeftParty);socket.on(SocketEvent.PARTY_PLAYBACK_CHANGED_RES,onPlaybackChanged);socket.on(SocketEvent.PARTY_NOT_FOUND_RES,onPartyNotFound);socket.on(SocketEvent.PARTY_NEW_USER_JOINED_RES,onNewUserJoined);socket.on(SocketEvent.PARTY_JOINED_RES,onPartyJoined);// NEED TO CHECK IF PARTY EXISTS HERE \nreturn function(){return handleUserLeaving();};},[]);var getCurrentlyPlaying=function getCurrentlyPlaying(partyId){console.log('Getting currently playing...');axios.get(SPOTIFY_API.CURRENTLY_PLAYING).then(function(res){socket.emit(SocketEvent.PARTY_PLAYBACK_REQ,{playbackState:res.data,partyId:partyId});}).catch(function(err){console.log('could not get currently playing');});};var setCurrentlyPlaying=function setCurrentlyPlaying(playbackState){console.log('setting currently playing...',playbackState);var args={uris:[playbackState.item.uri]};axios.put(SPOTIFY_API.PLAY,args).then(function(){return console.log('Playing new song: ',playbackState.item.name);}).catch(function(err){return console.log('could not set new playback state. ',err);});};var handleUserLeaving=function handleUserLeaving(){socket.off(SocketEvent.USER_LEFT_PARTY_RES,onUserLeftParty);socket.off(SocketEvent.PARTY_PLAYBACK_CHANGED_RES,onPlaybackChanged);socket.off(SocketEvent.PARTY_NOT_FOUND_RES,onPartyNotFound);socket.off(SocketEvent.PARTY_NEW_USER_JOINED_RES,onNewUserJoined);socket.off(SocketEvent.PARTY_JOINED_RES,onPartyJoined);clearInterval(pollCurrentlyPlaying);socket.emit(SocketEvent.USER_LEFT_PARTY_REQ);};useEffect(function(){if(!user||isLoading){console.log('You are not authed');return;}console.log('Logged in as ',user.id);socket.emit(SocketEvent.PARTY_JOINED_REQ,{user:user,socketId:socket.id,partyId:partyId});},[user]);// const onPartyJoinedUnauthed = (numberOfUsers: number) => {\n//     console.log('PARTY JOINED BACK')\n//     setNumberOfUsers(numberOfUsers);\n// }\nreturn/*#__PURE__*/React.createElement(\"div\",null,user&&user.id?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h1\",null,\"A duper dope party\"),/*#__PURE__*/React.createElement(\"h2\",null,\"Hi, \",user.display_name,\"!\"),/*#__PURE__*/React.createElement(\"div\",null,\"The DJ is \",currentParty===null||currentParty===void 0?void 0:(_currentParty$adminUs=currentParty.adminUser)===null||_currentParty$adminUs===void 0?void 0:_currentParty$adminUs.display_name),/*#__PURE__*/React.createElement(\"div\",null,\"Users in party: \",currentParty===null||currentParty===void 0?void 0:(_currentParty$users=currentParty.users)===null||_currentParty$users===void 0?void 0:_currentParty$users.map(function(user){return user.display_name;}).join(', ')),(currentParty===null||currentParty===void 0?void 0:currentParty.playbackState)?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",{className:\"song\"},\"Currently playing\"),/*#__PURE__*/React.createElement(\"h3\",null,currentParty===null||currentParty===void 0?void 0:(_currentParty$playbac=currentParty.playbackState)===null||_currentParty$playbac===void 0?void 0:_currentParty$playbac.item.name),/*#__PURE__*/React.createElement(\"h3\",null,currentParty===null||currentParty===void 0?void 0:(_currentParty$playbac2=currentParty.playbackState)===null||_currentParty$playbac2===void 0?void 0:_currentParty$playbac2.item.album.artists[0].name)):/*#__PURE__*/React.createElement(\"div\",null,\"No tracks playing\")):/*#__PURE__*/React.createElement(\"div\",null,\"This is a party, but you aint authed.\"));};export default PartyPage;","map":{"version":3,"sources":["/Users/max/dev/listening-party/client/src/pages/Party.tsx"],"names":["React","useEffect","useState","SocketEvent","axios","useHistory","useUser","socket","SPOTIFY_API","PartyPage","match","user","isLoading","undefined","currentParty","setCurrentParty","partyId","params","id","history","pollCurrentlyPlaying","onUserLeftParty","party","console","log","adminUser","clearInterval","setInterval","getCurrentlyPlaying","onPlaybackChanged","isAdminUser","playbackState","setCurrentlyPlaying","onNewUserJoined","users","length","onPartyNotFound","setTimeout","push","onPartyJoined","is_playing","on","USER_LEFT_PARTY_RES","PARTY_PLAYBACK_CHANGED_RES","PARTY_NOT_FOUND_RES","PARTY_NEW_USER_JOINED_RES","PARTY_JOINED_RES","handleUserLeaving","get","CURRENTLY_PLAYING","then","res","emit","PARTY_PLAYBACK_REQ","data","catch","err","args","uris","item","uri","put","PLAY","name","off","USER_LEFT_PARTY_REQ","PARTY_JOINED_REQ","socketId","display_name","map","join","album","artists"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport io from 'socket.io-client'\nimport { SocketEvent, Party, PlaybackState } from '../common';\nimport axios, { AxiosResponse } from 'axios';\nimport Button from '../components/Button';\nimport { getHashParams } from '../helpers/helpers';\nimport { withRouter, match, useHistory } from 'react-router';\n\nimport { useUser } from '../contexts/UserContext';\nimport socket from '../socket';\nimport { User } from '../common';\nimport { SPOTIFY_API } from '../const';\n\ninterface Props {\n    match: any;\n}\n\nconst PartyPage: React.FC<Props> = ({ match }): React.ReactElement => {\n    const { user, isLoading } = useUser();\n    const [currentParty, setCurrentParty] = useState<Party | undefined>(undefined);\n    const partyId = match.params.id;\n    const history = useHistory();\n    let pollCurrentlyPlaying: any;\n\n    const onUserLeftParty = (party: Party) => {\n        console.log('A user left party.');\n        if (party && party.adminUser?.id === user?.id) {\n            console.log('Youve been assigned admin.');\n            clearInterval(pollCurrentlyPlaying);\n            pollCurrentlyPlaying = setInterval(() => {\n                getCurrentlyPlaying(party.id);\n            }, 5000);\n        }\n\n        setCurrentParty(party);\n    }\n\n    const onPlaybackChanged = (party: Party) => {\n        console.log('Playback state changed.');\n        const isAdminUser = party.adminUser?.id === user?.id;\n        if (!isAdminUser) {\n            if (party.playbackState) {\n                setCurrentlyPlaying(party.playbackState);\n            }\n        }\n\n        setCurrentParty(party);\n    }\n\n    const onNewUserJoined = (party: Party) => {\n        console.log('New user joined,', party.users ? party.users[party.users?.length - 1] : '');\n        setCurrentParty(party);\n    }\n\n    const onPartyNotFound = () => {\n        console.log('This party was not found... redirecting back');\n        setTimeout(() => {\n            history.push('/');\n        }, 2000);\n    }\n\n    const onPartyJoined = (party: Party) => {\n        if (party.adminUser?.id === user?.id) {\n            pollCurrentlyPlaying = setInterval(() => {\n                getCurrentlyPlaying(party.id);\n            }, 5000);\n        }\n        setCurrentParty(party);\n        if (party.playbackState && party.playbackState.is_playing) {\n            setCurrentlyPlaying(party.playbackState);\n        }\n    }\n\n    useEffect(() => {\n        console.log('loaded party first time')\n\n        socket.on(SocketEvent.USER_LEFT_PARTY_RES, onUserLeftParty);\n        socket.on(SocketEvent.PARTY_PLAYBACK_CHANGED_RES, onPlaybackChanged);\n        socket.on(SocketEvent.PARTY_NOT_FOUND_RES, onPartyNotFound);\n        socket.on(SocketEvent.PARTY_NEW_USER_JOINED_RES, onNewUserJoined);\n        socket.on(SocketEvent.PARTY_JOINED_RES, onPartyJoined);\n\n        // NEED TO CHECK IF PARTY EXISTS HERE \n        return () => handleUserLeaving();\n    }, [])\n\n    const getCurrentlyPlaying = (partyId: string) => {\n        console.log('Getting currently playing...');\n        axios.get(SPOTIFY_API.CURRENTLY_PLAYING)\n            .then((res: AxiosResponse<PlaybackState>) => {\n                socket.emit(SocketEvent.PARTY_PLAYBACK_REQ, { playbackState: res.data, partyId: partyId })\n            })\n            .catch(err => { console.log('could not get currently playing') })\n    }\n\n    const setCurrentlyPlaying = (playbackState: PlaybackState) => {\n        console.log('setting currently playing...', playbackState);\n        const args = {\n            uris: [playbackState.item.uri]\n        }\n        axios.put(SPOTIFY_API.PLAY, args)\n            .then(() => console.log('Playing new song: ', playbackState.item.name))\n            .catch(err => console.log('could not set new playback state. ', err));\n    }\n\n    const handleUserLeaving = () => {\n        socket.off(SocketEvent.USER_LEFT_PARTY_RES, onUserLeftParty);\n        socket.off(SocketEvent.PARTY_PLAYBACK_CHANGED_RES, onPlaybackChanged);\n        socket.off(SocketEvent.PARTY_NOT_FOUND_RES, onPartyNotFound);\n        socket.off(SocketEvent.PARTY_NEW_USER_JOINED_RES, onNewUserJoined);\n        socket.off(SocketEvent.PARTY_JOINED_RES, onPartyJoined);\n\n        clearInterval(pollCurrentlyPlaying);\n        socket.emit(SocketEvent.USER_LEFT_PARTY_REQ)\n    }\n\n\n    useEffect(() => {\n        if (!user || isLoading) {\n            console.log('You are not authed');\n            return;\n        }\n\n        console.log('Logged in as ', user.id);\n\n        socket.emit(SocketEvent.PARTY_JOINED_REQ, { user: user, socketId: socket.id, partyId: partyId })\n    }, [user])\n\n    // const onPartyJoinedUnauthed = (numberOfUsers: number) => {\n    //     console.log('PARTY JOINED BACK')\n    //     setNumberOfUsers(numberOfUsers);\n    // }\n\n    return (\n        <div>\n            {user && user.id ?\n                <div>\n                    <h1>A duper dope party</h1>\n                    <h2>Hi, {user.display_name}!</h2>\n                    <div>The DJ is {currentParty?.adminUser?.display_name}</div>\n                    <div>Users in party: {currentParty?.users?.map(user => user.display_name).join(', ')}</div>\n                    {currentParty?.playbackState ?\n                        <div>\n                            <div className=\"song\">Currently playing</div>\n                            <h3>{currentParty?.playbackState?.item.name}</h3>\n                            <h3>{currentParty?.playbackState?.item.album.artists[0].name}</h3>\n                        </div>\n                        :\n                        <div>No tracks playing</div>\n                    }\n                </div>\n                :\n                <div>This is a party, but you aint authed.</div>}\n        </div>);\n\n};\n\nexport default PartyPage;\n"]},"metadata":{},"sourceType":"module"}