{"ast":null,"code":"import _slicedToArray from\"/Users/max/dev/listening-party/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{EventType}from'../common';import{useUser}from'../contexts/UserContext';import socket from'../socket';var PartyPage=function PartyPage(_ref){var match=_ref.match;var _useUser=useUser(),user=_useUser.user;var partyId=match.params.id;console.log(partyId);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),usersInParty=_useState2[0],setUsersInParty=_useState2[1];useEffect(function(){if(user){socket.emit(EventType.PARTY_JOINED_REQ,{socketId:socket.id,partyId:partyId});}socket.on(EventType.PARTY_JOINED_RES,function(party){console.log('party state rn',party);if(party.users){setUsersInParty(party.users);}});},[]);return/*#__PURE__*/React.createElement(\"div\",null,user&&user.id?/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"div\",null,\"Hi, \",user.id,\"!\")):/*#__PURE__*/React.createElement(\"div\",null,\"This is a party, but you aint authed.\"),/*#__PURE__*/React.createElement(\"div\",null,usersInParty.map(function(user){return user.display_name;})));};export default PartyPage;","map":{"version":3,"sources":["/Users/max/dev/listening-party/client/src/pages/Party.tsx"],"names":["React","useEffect","useState","EventType","useUser","socket","PartyPage","match","user","partyId","params","id","console","log","usersInParty","setUsersInParty","emit","PARTY_JOINED_REQ","socketId","on","PARTY_JOINED_RES","party","users","map","display_name"],"mappings":"wHAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CAGA,OAASC,SAAT,KAAiC,WAAjC,CAMA,OAASC,OAAT,KAAwB,yBAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,WAAnB,CAOA,GAAMC,CAAAA,SAA0B,CAAG,QAA7BA,CAAAA,SAA6B,MAAmC,IAAhCC,CAAAA,KAAgC,MAAhCA,KAAgC,cACjDH,OAAO,EAD0C,CAC1DI,IAD0D,UAC1DA,IAD0D,CAElE,GAAMC,CAAAA,OAAO,CAAGF,KAAK,CAACG,MAAN,CAAaC,EAA7B,CACAC,OAAO,CAACC,GAAR,CAAYJ,OAAZ,EAHkE,cAK1BP,QAAQ,CAAS,EAAT,CALkB,wCAK3DY,YAL2D,eAK7CC,eAL6C,eAOlEd,SAAS,CAAC,UAAM,CACZ,GAAIO,IAAJ,CAAU,CACNH,MAAM,CAACW,IAAP,CAAYb,SAAS,CAACc,gBAAtB,CAAwC,CAAEC,QAAQ,CAAEb,MAAM,CAACM,EAAnB,CAAuBF,OAAO,CAAEA,OAAhC,CAAxC,EACH,CAEDJ,MAAM,CAACc,EAAP,CAAUhB,SAAS,CAACiB,gBAApB,CAAsC,SAACC,KAAD,CAAkB,CACpDT,OAAO,CAACC,GAAR,CAAY,gBAAZ,CAA8BQ,KAA9B,EACA,GAAIA,KAAK,CAACC,KAAV,CAAiB,CACbP,eAAe,CAACM,KAAK,CAACC,KAAP,CAAf,CACH,CACJ,CALD,EAMH,CAXQ,CAWN,EAXM,CAAT,CAaA,mBACI,+BACKd,IAAI,EAAIA,IAAI,CAACG,EAAb,cACG,4CACI,sCAAUH,IAAI,CAACG,EAAf,KADJ,CADH,cAKG,uEANR,cAOI,+BAAMG,YAAY,CAACS,GAAb,CAAiB,SAAAf,IAAI,QAAIA,CAAAA,IAAI,CAACgB,YAAT,EAArB,CAAN,CAPJ,CADJ,CAWH,CA/BD,CAiCA,cAAelB,CAAAA,SAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport io from 'socket.io-client'\nimport { EventType, Party } from '../common';\nimport axios from 'axios';\nimport Button from '../components/Button';\nimport { getHashParams } from '../helpers/helpers';\nimport { withRouter, match } from 'react-router';\n\nimport { useUser } from '../contexts/UserContext';\nimport socket from '../socket';\nimport { User } from '../common';\n\ninterface Props {\n    match: any;\n}\n\nconst PartyPage: React.FC<Props> = ({ match }): React.ReactElement => {\n    const { user } = useUser();\n    const partyId = match.params.id;\n    console.log(partyId);\n\n    const [usersInParty, setUsersInParty] = useState<User[]>([]);\n\n    useEffect(() => {\n        if (user) {\n            socket.emit(EventType.PARTY_JOINED_REQ, { socketId: socket.id, partyId: partyId })\n        }\n\n        socket.on(EventType.PARTY_JOINED_RES, (party: Party) => {\n            console.log('party state rn', party)\n            if (party.users) {\n                setUsersInParty(party.users);\n            }\n        });\n    }, [])\n\n    return (\n        <div>\n            {user && user.id ?\n                <div>\n                    <div>Hi, {user.id}!</div>\n                </div>\n                :\n                <div>This is a party, but you aint authed.</div>}\n            <div>{usersInParty.map(user => user.display_name)}</div>\n        </div>);\n\n};\n\nexport default PartyPage;\n"]},"metadata":{},"sourceType":"module"}