{"ast":null,"code":"import _regeneratorRuntime from\"/Users/max/dev/listening-party/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/max/dev/listening-party/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/max/dev/listening-party/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useLocation}from'react-router-dom';import axios from'axios';import Button from'../components/Button';import API_ENDPOINTS from'../endpoints';import{getHashParams}from'../helpers';var Home=function Home(){var clientId='ac96599f92324f9ea5a9f0e80f48b9a4';var location=useLocation();var scopes=['user-read-private','user-modify-playback-state','user-read-currently-playing','user-read-playback-state'];// const state = '';\nvar redirectUri='http://localhost:3000/';var authURL=\"https://accounts.spotify.com/authorize?response_type=token&client_id=\".concat(encodeURIComponent(clientId),\"&scope=\").concat(encodeURIComponent(scopes.join('%20')),\"&redirect_uri=\").concat(encodeURIComponent(redirectUri));var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoggedIn=_useState2[0],setIsLoggedIn=_useState2[1];useEffect(function(){if(!location.hash)return;setIsLoggedIn(true);var locationArgs=getHashParams(location.hash);axios.defaults.headers.common['Authorization']='Bearer '+locationArgs.access_token;});if(!isLoggedIn){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"a\",{href:authURL},\" Login \"));}var getCurrentlyPlaying=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(API_ENDPOINTS.CURRENT_PLAYBACK);case 2:userResponse=_context.sent;console.log(userResponse.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getCurrentlyPlaying(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(\"div\",null,\"YOU ARE LOGGED IN\",/*#__PURE__*/React.createElement(Button,{name:\"dogs\",onClick:getCurrentlyPlaying}));};export default Home;","map":{"version":3,"sources":["/Users/max/dev/listening-party/client/src/pages/Home.tsx"],"names":["React","useEffect","useState","useLocation","axios","Button","API_ENDPOINTS","getHashParams","Home","clientId","location","scopes","redirectUri","authURL","encodeURIComponent","join","isLoggedIn","setIsLoggedIn","hash","locationArgs","defaults","headers","common","access_token","getCurrentlyPlaying","get","CURRENT_PLAYBACK","userResponse","console","log","data"],"mappings":"qWAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAEA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,cAA1B,CACA,OAASC,aAAT,KAA8B,YAA9B,CAQA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAA0B,CACnC,GAAMC,CAAAA,QAAQ,CAAG,kCAAjB,CACA,GAAIC,CAAAA,QAAQ,CAAGP,WAAW,EAA1B,CACA,GAAMQ,CAAAA,MAAM,CAAG,CAAC,mBAAD,CAAsB,4BAAtB,CAAoD,6BAApD,CAAmF,0BAAnF,CAAf,CACA;AACA,GAAMC,CAAAA,WAAW,CAAG,wBAApB,CACA,GAAMC,CAAAA,OAAO,gFAA2EC,kBAAkB,CAACL,QAAD,CAA7F,mBAAiHK,kBAAkB,CAACH,MAAM,CAACI,IAAP,CAAY,KAAZ,CAAD,CAAnI,0BAAwKD,kBAAkB,CAACF,WAAD,CAA1L,CAAb,CANmC,cAQCV,QAAQ,CAAC,KAAD,CART,wCAQ5Bc,UAR4B,eAQhBC,aARgB,eAUnChB,SAAS,CAAC,UAAM,CACZ,GAAI,CAACS,QAAQ,CAACQ,IAAd,CAAoB,OAEpBD,aAAa,CAAC,IAAD,CAAb,CAEA,GAAIE,CAAAA,YAA4B,CAAGZ,aAAa,CAACG,QAAQ,CAACQ,IAAV,CAAhD,CACAd,KAAK,CAACgB,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,EAAiD,UAAYH,YAAY,CAACI,YAA1E,CACH,CAPQ,CAAT,CASA,GAAI,CAACP,UAAL,CAAiB,CACb,mBAAQ,4CACJ,yBAAG,IAAI,CAAEH,OAAT,YADI,CAAR,CAGH,CAED,GAAMW,CAAAA,mBAAmB,0FAAG,0KACGpB,CAAAA,KAAK,CAACqB,GAAN,CAAUnB,aAAa,CAACoB,gBAAxB,CADH,QAClBC,YADkB,eAExBC,OAAO,CAACC,GAAR,CAAYF,YAAY,CAACG,IAAzB,EAFwB,sDAAH,kBAAnBN,CAAAA,mBAAmB,0CAAzB,CAKA,mBAAQ,gEAEJ,oBAAC,MAAD,EAAQ,IAAI,CAAC,MAAb,CAAoB,OAAO,CAAEA,mBAA7B,EAFI,CAAR,CAKH,CAnCD,CAqCA,cAAehB,CAAAA,IAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { useLocation } from 'react-router-dom';\n\nimport axios from 'axios';\nimport Button from '../components/Button';\nimport API_ENDPOINTS from '../endpoints';\nimport { getHashParams } from '../helpers';\n\ninterface AuthHashParams {\n    access_token: string;\n    token_type: string;\n    expires_in: string;\n}\n\nconst Home = (): React.ReactElement => {\n    const clientId = 'ac96599f92324f9ea5a9f0e80f48b9a4';\n    let location = useLocation();\n    const scopes = ['user-read-private', 'user-modify-playback-state', 'user-read-currently-playing', 'user-read-playback-state'];\n    // const state = '';\n    const redirectUri = 'http://localhost:3000/';\n    const authURL = `https://accounts.spotify.com/authorize?response_type=token&client_id=${encodeURIComponent(clientId)}&scope=${encodeURIComponent(scopes.join('%20'))}&redirect_uri=${encodeURIComponent(redirectUri)}`\n\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n    useEffect(() => {\n        if (!location.hash) return;\n\n        setIsLoggedIn(true);\n\n        let locationArgs: AuthHashParams = getHashParams(location.hash);\n        axios.defaults.headers.common['Authorization'] = 'Bearer ' + locationArgs.access_token;\n    });\n\n    if (!isLoggedIn) {\n        return (<div>\n            <a href={authURL}> Login </a>\n        </div>);\n    }\n\n    const getCurrentlyPlaying = async () => {\n        const userResponse = await axios.get(API_ENDPOINTS.CURRENT_PLAYBACK);\n        console.log(userResponse.data);\n    }\n\n    return (<div>\n        YOU ARE LOGGED IN\n        <Button name=\"dogs\" onClick={getCurrentlyPlaying}></Button>\n    </div>)\n\n};\n\nexport default Home;\n"]},"metadata":{},"sourceType":"module"}